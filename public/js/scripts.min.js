(function(){jQuery(function(a){function e(e,t,s){a(document).ajaxStart(function(){s.attr("disabled",!0),s.find(".ajax-progress").remove(),s.append('<span class="ajax-progress">&nbsp;<i class="fa fa-refresh fa-spin"></i><span>')}),a(document).ajaxComplete(function(){s.closest("nav").remove()}),a.ajax({type:"GET",url:"/ajax/reviews?page="+e,success:function(e){a(t).find(".content").append(e)}})}a(document).on("submit","form.ajax",function(e){var t=a(this);a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('input[name="_token"]').attr("value")}}),e.preventDefault(),a(document).ajaxStart(function(){t.find('*[type="submit"]').attr("disabled",!0),t.find('*[type="submit"] .ajax-progress').remove(),t.find('*[type="submit"]').append('<span class="ajax-progress">&nbsp;<i class="fa fa-refresh fa-spin"></i><span>')}),a(document).ajaxComplete(function(){t.find('*[type="submit"]').attr("disabled",!1),t.find('*[type="submit"] .ajax-progress').remove()}),a.ajax({type:"POST",url:t.attr("action"),data:t.serialize(),dataType:"json",success:function(a){var e,s;switch(a.validator){case!0:e="success",s=a.message,t.get(0).reset();break;case!1:e="danger",s="<ul>";for(key in a.message)s+="<li>"+a.message[key]+"</li>";s+="</ul>"}var n='<div class="alert alert-'+e+'">';n+='<a href="#" class="close" data-dismiss="alert">&times;</a>'+s,n+="</div>",t.prev(".alert").remove(),t.before(n)}})}),a(document).on("click",".read-more .ajax",function(e){e.preventDefault();var t=a(this).data("path");a("#modal .modal-content").load(t,function(){a("#modal").modal("show")})}),a(document).on("click",".popup.ajax",function(e){e.preventDefault();var t=a(this).data("path");a("#modal .modal-content").load(t,function(){a("#modal").modal("show")})}),a(document).on("click",".load-more.ajax a",function(t){t.preventDefault();var s=a(this).attr("href").split("page=")[1],n=a(this).closest(".block"),o=a(this);e(s,n,o)})})}).call(this);